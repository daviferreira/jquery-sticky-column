!function(a,b){"use strict";function c(b,c){this.options=a.extend({},e,c),this.defaults=e,this.name=d,this.root=a(b),this.init()}var d="stickySidebar",e={sidebar:".sidebar",content:".content",tolerance:110},f={position:"",top:""};c.prototype.init=function(){var c=this;this.sidebar=this.root.find(this.options.sidebar),this.content=this.root.find(this.options.content),this.lastScrollTop=0,this.canBeSticky()===!0&&a(b).bind("scroll.sticky_sidebar",function(){c.setScrollDirection().setBoundaries().positionSidebar()})},c.prototype.canBeSticky=function(){return this.sidebar.height()<this.content.height()&&this.sidebar.height()>a(b).height()},c.prototype.setBoundaries=function(){var c=this.content.offset().top,d=this.content.outerHeight();return this.boundaries={contentTop:c,contentBottom:c+d,contentHeight:d,sidebarHeight:this.sidebar.outerHeight(),windowHeight:a(b).height()},this},c.prototype.positionSidebar=function(){return this.lastScrollTop>this.boundaries.contentTop&&this.lastScrollTop<this.boundaries.contentBottom?this["DOWN"===this.scrollDirection?"scrollDown":"scrollUp"]():this.lastScrollTop<this.boundaries.contentTop&&this.sidebar.css("top","").removeClass("top-fixed"),this},c.prototype.scrollDown=function(){var a,b=this.lastScrollTop+this.boundaries.windowHeight;this.sidebar.hasClass("scrolling-up")?this.sidebar.removeClass("scrolling-up").addClass("scrolling-down"):this.sidebar.hasClass("top-fixed")&&(a=this.sidebar.offset().top-this.boundaries.contentTop,this.sidebar.removeClass("top-fixed").css({position:"absolute",top:a}).addClass("scrolling-down")),this.sidebar.hasClass("scrolling-down")?b>this.sidebar.offset().top+this.boundaries.sidebarHeight&&this.sidebar.css(f).addClass("bottom-fixed").removeClass("scrolling-down"):b>this.boundaries.contentBottom?this.sidebar.removeClass("bottom-fixed").css({position:"absolute",top:this.boundaries.contentHeight-this.boundaries.sidebarHeight}):b+this.options.tolerance>this.boundaries.sidebarHeight+this.boundaries.contentTop&&this.sidebar.css(f).removeClass("top-fixed").addClass("bottom-fixed")},c.prototype.scrollUp=function(){this.sidebar.hasClass("scrolling-down")?this.sidebar.removeClass("scrolling-down").addClass("scrolling-up"):this.sidebar.hasClass("bottom-fixed")&&this.sidebar.css({position:"absolute",top:this.sidebar.offset().top-this.boundaries.contentTop}).removeClass("bottom-fixed").addClass("scrolling-up"),this.sidebar.hasClass("scrolling-up")?this.lastScrollTop<this.sidebar.offset().top&&this.sidebar.css(f).addClass("top-fixed").removeClass("scrolling-up"):this.lastScrollTop<this.boundaries.contentTop?this.sidebar.css("position","").removeClass("top-fixed"):this.lastScrollTop-this.options.tolerance<this.boundaries.contentBottom-this.boundaries.sidebarHeight&&this.sidebar.css(f).removeClass("bottom-fixed").addClass("top-fixed")},c.prototype.setScrollDirection=function(){var c=a(b).scrollTop();return this.scrollDirection=c>this.lastScrollTop?"DOWN":"UP",this.lastScrollTop=c,this},a.fn[d]=function(b){return this.each(function(){a.data(this,"plugin_"+d)||a.data(this,"plugin_"+d,new c(this,b))})}}(jQuery,window);